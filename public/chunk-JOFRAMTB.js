import{A as k,B as s,Ca as q,E as z,Ea as h,F as u,I as Y,M as m,N as E,P as M,Q as D,R as f,S as b,T as o,U as p,V as I,W as F,X as G,Y as C,Z as N,_ as Q,aa as R,ca as S,ea as j,f as w,fa as U,ga as L,h as x,ha as O,j as n,la as Z,m as d,na as T,p as A,r as P,s as B,sa as _,wa as V,x as c,za as H}from"./chunk-C55IGHLK.js";var g=h.BASE_URL,ee={id:"new",title:"",price:0,description:"",slug:"",stock:0,sizes:[],gender:"men",tags:[],images:[],user:{}},K=class t{http=A(_);productsCache=new Map;productCache=new Map;getProducts(e){let{limit:i=9,offset:r=0,gender:a=""}=e,l=`${i}-${r}-${a}`;return this.productsCache.has(l)?w(this.productsCache.get(l)):this.http.get(`${g}/products`,{params:{limit:i,offset:r,gender:a}}).pipe(n($=>this.productsCache.set(l,$)))}getProductByIdSlug(e){return this.productCache.has(e)?w(this.productCache.get(e)):this.http.get(`${g}/products/${e}`).pipe(n(i=>this.productCache.set(e,i)))}getProductById(e){return e==="new"?w(ee):this.productCache.has(e)?w(this.productCache.get(e)):this.http.get(`${g}/products/${e}`).pipe(n(i=>this.productCache.set(e,i)))}updateProduct(e,i){return this.http.patch(`${g}/products/${e}`,i).pipe(n(r=>this.updateProductCache(r)))}createProduct(e){return this.http.post(`${g}/products`,e).pipe(n(i=>this.addCacheProduct(i)))}updateProductCache(e){let i=e.id;this.productCache.set(i,e),this.productsCache.forEach(r=>{r.products=r.products.map(a=>a.id===i?e:a)})}addCacheProduct(e){let i=e.id;this.productCache.set(i,e),this.productsCache.forEach(r=>{r.products=[...r.products,e]})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"})};var X=class t{activatedRoute=A(V);currentPage=q(this.activatedRoute.queryParamMap.pipe(x(e=>e.get("page")?+e.get("page"):1),x(e=>isNaN(e)?1:e)),{initialValue:1});static \u0275fac=function(i){return new(i||t)};static \u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"})};var te=()=>[],re=t=>({page:t});function ae(t,e){if(t&1){let i=F();o(0,"button",2),G("click",function(){let a=P(i).$implicit,l=C();return B(l.activePage.set(a))}),R(1),p()}if(t&2){let i=e.$implicit,r=C();E("btn-primary",i===r.activePage()),m("routerLink",j(5,te))("queryParams",U(6,re,i)),s(),S(" ",i," ")}}function ne(t,e){}var W=class t{currentPage=c(1);pages=c(0);activePage=T(this.currentPage);getPagesList=Z(()=>Array.from({length:this.pages()},(e,i)=>i+1));static \u0275fac=function(i){return new(i||t)};static \u0275cmp=u({type:t,selectors:[["shared-pagination"]],inputs:{currentPage:[1,"currentPage"],pages:[1,"pages"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center"],[1,"join-item","btn",3,"routerLink","queryParams","btn-primary"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(i,r){i&1&&(o(0,"div",0),f(1,ae,2,8,"button",1,D,!1,ne,0,0),p()),i&2&&(s(),b(r.getPagesList()))},dependencies:[H],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var se=h.BASE_URL,y=class t{transform(e){let i="/assets/images/no-image.jpg",r=`${se}/files/product/`;if(typeof e=="string")return`${r}${e}`;let a=e.at(0);return a?`${r}${a}`:i}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=Y({name:"productImage",type:t,pure:!0})};var oe=["swiperContainer"];function pe(t,e){if(t&1&&(o(0,"swiper-slide",2)(1,"div"),I(2,"img",3),L(3,"productImage"),p()()),t&2){let i=e.$implicit;s(2),m("src",O(3,1,i),k)}}var J=class t{images=c.required();swiperDiv=z.required("swiperContainer");ngAfterViewInit(){this.initSwiper()}initSwiper(){let e=this.swiperDiv().nativeElement;if(!e)return;let i=e,r={pagination:{clickable:!0,enabled:!1},navigation:{enabled:!0},loop:this.images().length>1,autoplay:{delay:2e3,disableOnInteraction:!1}};Object.assign(i,r),i.initialize()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=u({type:t,selectors:[["product-carousel"]],viewQuery:function(i,r){i&1&&N(r.swiperDiv,oe,5),i&2&&Q()},inputs:{images:[1,"images"]},decls:4,vars:0,consts:[["swiperContainer",""],["init","false",1,"h-full","w-full","rounded-2xl","overflow-hidden"],["lazy","true"],["alt","product","loading","lazy",3,"src"]],template:function(i,r){i&1&&(o(0,"swiper-container",1,0),f(2,pe,4,3,"swiper-slide",2,M),p()),i&2&&(s(2),b(r.images()))},dependencies:[y],styles:["[_nghost-%COMP%]{display:block}.swiper[_ngcontent-%COMP%]{width:100%;height:500px}"],changeDetection:0})};export{K as a,X as b,W as c,y as d,J as e};
