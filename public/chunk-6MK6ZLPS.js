import{a as me,b as h,c as ue,d as fe,e as ge,f as ve,g as be,h as he,i as xe,j as _e,k as z}from"./chunk-OXOCJGUG.js";import{a as y,b as Pe,c as Ce,d as Se,e as ye}from"./chunk-JOFRAMTB.js";import{$ as ne,A as ee,Aa as se,B as i,Ca as ce,Da as R,F as f,Fa as pe,K as L,M as c,N as g,O as E,Q as te,R as I,S as V,T as e,U as n,V as s,W as N,X as v,Y as x,a as Y,aa as r,b as J,ba as b,ca as _,ea as oe,fa as X,ga as K,h as Q,ha as W,la as ie,ma as re,p as m,pa as ae,r as A,s as M,t as H,u as U,wa as le,x as P,xa as de,ya as C,z as Z,za as S}from"./chunk-C55IGHLK.js";var O=class a{authService=m(pe);router=m(C);user=ie(this.authService.user);logout(){this.authService.logout(),this.router.navigate(["/auth/login"])}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=f({type:a,selectors:[["app-admin-dashboard-layout"]],decls:42,vars:1,consts:[[1,"bg-slate-800","overflow-y-scroll","w-screen","h-screen","antialiased","text-slate-300","selection:bg-blue-600","selection:text-white"],[1,"flex","flex-col","relative","w-screen"],["id","menu",1,"bg-gray-900","min-h-screen","z-10","text-slate-300","w-64","fixed","left-0","h-screen","overflow-y-scroll"],["id","logo",1,"my-4","px-6"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white","font-montserrat","cursor-pointer"],[1,"text-blue-500"],[1,"text-slate-500","text-sm"],["id","profile",1,"px-6","py-10"],[1,"text-slate-500"],["href","#",1,"inline-flex","space-x-2","items-center"],["src","https://images.unsplash.com/photo-1542909168-82c3e7fdca5c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=128&q=80","alt","",1,"rounded-full","w-8","h-8"],[1,"text-sm","md:text-base","font-bold"],["id","nav",1,"w-full","px-6"],["routerLink","/admin/dashboard","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"],[1,"flex","flex-col"],[1,"text-lg","font-bold","leading-5","text-white"],[1,"text-sm","text-white/50","hidden","md:block"],["routerLink","/admin/products","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"],[1,"text-lg","text-slate-300","font-bold","leading-5"],[1,"text-sm","text-slate-500","hidden","md:block"],[1,"divider"],[1,"btn","btn-ghost","text-accent","w-full",3,"click"],[1,"flex-1","ml-64","pt-5","px-5"]],template:function(t,o){if(t&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),r(5," Teslo"),e(6,"span",5),r(7," | shop"),n()(),e(8,"p",6),r(9,"Manage your actions and activities"),n()(),e(10,"div",7)(11,"p",8),r(12,"Bienvenido,"),n(),e(13,"a",9)(14,"span"),s(15,"img",10),n(),e(16,"span",11),r(17),n()()(),e(18,"div",12)(19,"a",13)(20,"div"),H(),e(21,"svg",14),s(22,"path",15),n()(),U(),e(23,"div",16)(24,"span",17),r(25,"Dashboard"),n(),e(26,"span",18),r(27,"Data Overview"),n()()(),e(28,"a",19)(29,"div"),H(),e(30,"svg",20),s(31,"path",21),n()(),U(),e(32,"div",16)(33,"span",22),r(34,"Productos"),n(),e(35,"span",23),r(36,"Listado de productos"),n()()(),s(37,"div",24),e(38,"button",25),v("click",function(){return o.logout()}),r(39," Cerrar sesi\xF3n "),n()()()(),e(40,"div",26),s(41,"router-outlet"),n()()),t&2){let d;i(17),_(" ",(d=o.user())==null?null:d.fullName," ")}},dependencies:[de,S,se],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var ke=a=>["/admin/product",a],we=(a,l)=>l.id;function Fe(a,l){if(a&1&&(e(0,"span",9),r(1),n()),a&2){let t=x().$implicit;i(),b(t.stock)}}function Ee(a,l){if(a&1&&(e(0,"span",10),r(1),n()),a&2){let t=x().$implicit;i(),b(t.stock)}}function De(a,l){if(a&1&&(e(0,"span",11),r(1),n()),a&2){let t=x().$implicit;i(),b(t.stock)}}function Te(a,l){if(a&1&&(e(0,"tr")(1,"th")(2,"label"),s(3,"input",2),n()(),e(4,"td")(5,"div",3)(6,"div",4)(7,"div",5),s(8,"img",6),K(9,"productImage"),n()(),e(10,"div")(11,"a",7),r(12),n(),e(13,"div",8),r(14),n()()()(),e(15,"td"),r(16),K(17,"currency"),n(),e(18,"td"),L(19,Fe,2,1,"span",9)(20,Ee,2,1,"span",10)(21,De,2,1,"span",11),n(),e(22,"th")(23,"a",12),r(24,"Detalles"),n()()()),a&2){let t=l.$implicit;i(8),c("src",W(9,8,t.images),ee)("alt",t.title),i(3),c("routerLink",X(12,ke,t.id)),i(),b(t.title),i(2),_(" ",t.sizes.join(", ")," "),i(2),_(" ",W(17,10,t.price)," "),i(3),E(t.stock<=10?19:t.stock<=20?20:21),i(4),c("routerLink",X(14,ke,t.id))}}var j=class a{products=P.required();static \u0275fac=function(t){return new(t||a)};static \u0275cmp=f({type:a,selectors:[["products-table"]],inputs:{products:[1,"products"]},decls:17,vars:0,consts:[[1,"overflow-x-auto"],[1,"table"],["type","checkbox",1,"checkbox"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","h-12","w-12"],[3,"src","alt"],[1,"font-bold","hover:text-accent","transition-colors","duration-300",3,"routerLink"],[1,"text-sm","opacity-50"],[1,"badge","badge-error"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"text-accent",3,"routerLink"]],template:function(t,o){t&1&&(e(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th")(5,"label"),s(6,"input",2),n()(),e(7,"th"),r(8,"Titulo"),n(),e(9,"th"),r(10,"Precio"),n(),e(11,"th"),r(12,"Inventario"),n(),s(13,"th"),n()(),e(14,"tbody"),I(15,Te,25,16,"tr",null,we),n()()()),t&2&&(i(15),V(o.products()))},dependencies:[Se,S,ae],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var Ae=()=>[],q=class a{productsService=m(y);paginationService=m(Pe);productsPerPage=Z(10);currentPage=this.paginationService.currentPage;productsResource$=R({request:()=>({page:this.currentPage()-1,limit:this.productsPerPage()}),loader:({request:l})=>this.productsService.getProducts({offset:l.page*9,limit:l.limit})});static \u0275fac=function(t){return new(t||a)};static \u0275cmp=f({type:a,selectors:[["app-products-admin-page"]],decls:23,vars:5,consts:[["selectPerPage",""],[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-accent"],[1,"divider"],[1,"flex","gap-4","items-center","h-20"],[3,"pages","currentPage"],[1,"select","select-bordered","w-32",3,"change"],["value","10"],["value","20"],["value","50"],["value","100"],[1,"flex","flex-1"],["routerLink","/admin/product/new",1,"btn","btn-primary"],[3,"products"]],template:function(t,o){if(t&1){let d=N();e(0,"h1",1),r(1,"Listado de productos"),n(),e(2,"h3",2),r(3," Total de productos "),e(4,"span",3),r(5),n()(),s(6,"div",4),e(7,"div",5),s(8,"shared-pagination",6),e(9,"select",7,0),v("change",function(){A(d);let u=ne(10);return M(o.productsPerPage.set(+u.value))}),e(11,"option",8),r(12,"10"),n(),e(13,"option",9),r(14,"20"),n(),e(15,"option",10),r(16,"50"),n(),e(17,"option",11),r(18,"100"),n()(),e(19,"div",12)(20,"button",13),r(21," Nuevo producto "),n()()(),s(22,"products-table",14)}if(t&2){let d,p,u;i(5),b((d=o.productsResource$.value())==null?null:d.count),i(3),c("pages",(p=(p=o.productsResource$.value())==null?null:p.pages)!==null&&p!==void 0?p:0)("currentPage",o.currentPage()),i(14),c("products",(u=(u=o.productsResource$.value())==null?null:u.products)!==null&&u!==void 0?u:oe(4,Ae))}},dependencies:[j,Ce,S],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var $=class a{control=P.required();get errorMessage(){let l=this.control().errors||{};return this.control().touched&&Object.keys(l).length>0?z.getTextError(l):null}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=f({type:a,selectors:[["shared-form-error-label"]],inputs:{control:[1,"control"]},decls:2,vars:1,consts:[[1,"text-red-500","text-xs"]],template:function(t,o){t&1&&(e(0,"span",0),r(1),n()),t&2&&(i(),b(o.errorMessage))},styles:["[_nghost-%COMP%]{display:block}"]})};function Me(a,l){if(a&1){let t=N();e(0,"button",15),v("click",function(){let d=A(t).$implicit,p=x();return M(p.onSizeClicked(d))}),r(1),n()}if(a&2){let t=l.$implicit,o=x();g("btn-secondary",o.productForm.value.sizes==null?null:o.productForm.value.sizes.includes(t)),i(),_(" ",t," ")}}var B=class a{product=P.required();formUtil=z;fb=m(xe);productsService=m(y);router=m(C);productForm=this.fb.group({title:["",h.required],description:["",h.required],slug:["",[h.required,h.pattern(this.formUtil.slugPattern)]],price:[0,[h.required,h.min(0)]],stock:[0,[h.required,h.min(0)]],sizes:[[""]],images:[[]],tags:[""],gender:["men",[h.required,h.pattern(/men|women|kid|unisex/)]]});sizes=["XS","S","M","L","XL","XXL"];ngOnInit(){this.setFormValue(this.product())}setFormValue(l){this.productForm.reset(this.product()),this.productForm.patchValue({tags:l.tags?.join(",")})}onSizeClicked(l){let t=this.productForm.value.sizes??[];t.includes(l)?t.splice(t.indexOf(l),1):t.push(l),this.productForm.patchValue({sizes:t})}onSubmit(){if(this.productForm.invalid){this.productForm.markAllAsTouched();return}let t=this.productForm.value,o=J(Y({},t),{tags:t.tags?.toLowerCase().split(",").map(d=>d.trim())??[]});this.product().id==="new"?this.productsService.createProduct(o).subscribe(d=>{console.log("Producto creado",d),this.router.navigate(["/admin/product",d.id])}):this.productsService.updateProduct(this.product().id,o).subscribe(d=>{console.log("Producto acutualizado",d)})}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=f({type:a,selectors:[["product-admin-page-details"]],inputs:{product:[1,"product"]},decls:42,vars:29,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-2xl","font-bold","h-12"],["type","text","placeholder","T\xEDtulo","formControlName","title",1,"input","input-bordered","w-full","outline-none","focus:outline-none"],[3,"control"],["type","text","placeholder","Slug","formControlName","slug",1,"input","input-bordered","w-full","outline-none","focus:outline-none"],["placeholder","Descripci\xF3n","rows","6","formControlName","description",1,"textarea","w-full","textarea-bordered","outline-none","focus:outline-none"],[1,"text-lg","font-bold"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["type","number","placeholder","Precio","formControlName","price",1,"input","input-bordered","w-full","outline-none","focus:outline-none"],["type","number","placeholder","Inventario","formControlName","stock",1,"input","input-bordered","w-full","outline-none","focus:outline-none"],["type","text","placeholder","Tags","formControlName","tags",1,"input","input-bordered","w-full","outline-none","focus:outline-none"],[1,"grid","grid-cols-4","gap-2"],["type","button",1,"btn","btn-sm",3,"click"],[1,"grid","grid-cols-6","gap-2"],["type","button",1,"btn","btn-sm",3,"btn-secondary"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"],[3,"images"],["type","file",1,"file-input","file-input-bordered","w-full","mt-4"]],template:function(t,o){if(t&1&&(e(0,"h1",0),r(1),n(),s(2,"div",1),e(3,"form",2),v("ngSubmit",function(){return o.onSubmit()}),e(4,"div",3)(5,"h2",4),r(6,"Datos generales"),n(),s(7,"input",5)(8,"shared-form-error-label",6)(9,"input",7)(10,"shared-form-error-label",6)(11,"textarea",8)(12,"shared-form-error-label",6),e(13,"h2",9),r(14,"Datos de venta"),n(),e(15,"div",10)(16,"div"),s(17,"input",11)(18,"shared-form-error-label",6),n(),e(19,"div"),s(20,"input",12)(21,"shared-form-error-label",6),n()(),s(22,"input",13)(23,"shared-form-error-label",6),e(24,"div",14)(25,"button",15),v("click",function(){return o.productForm.patchValue({gender:"men"})}),r(26," Masculino "),n(),e(27,"button",15),v("click",function(){return o.productForm.patchValue({gender:"women"})}),r(28," Femenino "),n(),e(29,"button",15),v("click",function(){return o.productForm.patchValue({gender:"kid"})}),r(30," Kid "),n(),e(31,"button",15),v("click",function(){return o.productForm.patchValue({gender:"unisex"})}),r(32," Unisex "),n()(),e(33,"div",16),I(34,Me,2,3,"button",17,te),n()(),e(36,"div",3)(37,"div",18)(38,"button",19),r(39," Guardar "),n()(),s(40,"product-carousel",20)(41,"input",21),n()()),t&2){let d,p,u,k,w,F;i(),b(o.product().title),i(2),c("formGroup",o.productForm),i(4),g("border-red-500",(d=(d=o.productForm.get("title"))==null?null:d.errors)!==null&&d!==void 0?d:!1),i(),c("control",o.productForm.get("title")),i(),g("border-red-500",(p=(p=o.productForm.get("slug"))==null?null:p.errors)!==null&&p!==void 0?p:!1),i(),c("control",o.productForm.get("slug")),i(),g("border-red-500",(u=(u=o.productForm.get("description"))==null?null:u.errors)!==null&&u!==void 0?u:!1),i(),c("control",o.productForm.get("description")),i(5),g("border-red-500",(k=(k=o.productForm.get("price"))==null?null:k.errors)!==null&&k!==void 0?k:!1),i(),c("control",o.productForm.get("price")),i(2),g("border-red-500",(w=(w=o.productForm.get("stock"))==null?null:w.errors)!==null&&w!==void 0?w:!1),i(),c("control",o.productForm.get("stock")),i(),g("border-red-500",(F=(F=o.productForm.get("tags"))==null?null:F.errors)!==null&&F!==void 0?F:!1),i(),c("control",o.productForm.get("tags")),i(2),g("btn-primary",o.productForm.value.gender==="men"),i(2),g("btn-accent",o.productForm.value.gender==="women"),i(2),g("btn-warning",o.productForm.value.gender==="kid"),i(2),g("btn-secondary",o.productForm.value.gender==="unisex"),i(3),V(o.sizes),i(6),c("images",o.product().images)}},dependencies:[ye,_e,ge,me,ve,ue,fe,be,he,$],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};function Le(a,l){a&1&&(e(0,"div",0),s(1,"span",2),n())}function Ie(a,l){if(a&1&&s(0,"product-admin-page-details",1),a&2){let t=x();c("product",t.productResource.value())}}var G=class a{activatedRoute=m(le);productService=m(y);router=m(C);productId=ce(this.activatedRoute.params.pipe(Q(l=>l.id)));productResource=R({request:()=>({id:this.productId()}),loader:({request:l})=>this.productService.getProductById(l.id)});redirectEffect=re(()=>{this.productResource.error()&&this.router.navigate(["/admin/products"])});static \u0275fac=function(t){return new(t||a)};static \u0275cmp=f({type:a,selectors:[["app-product-admin-page"]],decls:2,vars:2,consts:[[1,"flex","justify-center","items-center","h-[calc(100vh-24px)]"],[3,"product"],[1,"loading","loading-spinner","loading-lg"]],template:function(t,o){t&1&&L(0,Le,2,0,"div",0)(1,Ie,1,1,"product-admin-page-details",1),t&2&&(E(o.productResource.isLoading()?0:-1),i(),E(o.productResource.hasValue()?1:-1))},dependencies:[B],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var Ve=[{path:"",component:O,children:[{path:"products",component:q},{path:"product/:id",component:G},{path:"**",redirectTo:"products"}]}],It=Ve;export{Ve as adminDashboardRoutes,It as default};
